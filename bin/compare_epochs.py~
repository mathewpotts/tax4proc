#!/usr/bin/env python3

# Import Libs
import ROOT
import TDSTio
import TLPY
import os
import argparse

# PASS5 FILE PATHS FOR EACH EPOCH
epoch_path = os.environ['MDTAX4_DATA_PASS5'] + '/processing/root_all_files/'
epoch0     = epoch_path + 'epoch0_20180608-20190409.mdtax4ps5.ps2g.drmdpcgf.root'
epoch1     = epoch_path + 'epoch1_20190424-20190607.mdtax4ps5.ps2g.drmdpcgf.root'
epoch1_2   = epoch_path + 'epoch0-1.mdtax4.ps5.root'
epoch2     = epoch_path + '20190625-20201206.mdtax4.ps5.ps2g.drmdpcgf.root'

# Drawing in-plane angle (n_z)
files = [epoch2,epoch1_2,epoch0,epoch1]
for i,f in enumerate(files):
    print(i,f)
    file = ROOT.TFile('{0}'.format(f),'r')
    taTree = file.Get('taTree')
    #if i == 0:
        #taTree.Draw('stpln.n_ampwt[6][2]')
    #else:
        #taTree.Draw('stpln.n_ampwt[6][2]','','same')
    #ROOT.gPad.Update()

# Prompt exit
print('\nPress enter to continue.\n')
os.system('read gonext')




file = ROOT.TFile(epoch0,'r')
taTree_e1 = file.Get('taTree')
nentries_e1 = taTree_e1.GetEntries()
he1 = ROOT.TH1D('he1','Epoch 0 vs Epoch 2 n_{z} comparison;n_{z} of SDP;',40,-1,1)
taTree_e1.Draw('TMath::stpln.n_ampwt[6][2]>>he1')

file1 = ROOT.TFile(epoch2,'r')
taTree_e2 = file1.Get('taTree')
nentries_e2 = taTree_e2.GetEntries()
norm = nentries_e1/nentries_e2
he2 = ROOT.TH1D('he2','he2',40,-1,1)
taTree_e2.Draw('stpln.n_ampwt[6][2]>>he2','{0}'.format(norm),'sames')

#ROOT.gPad.FindObject('htemp').GetXaxis().SetTitle('n_{z} of SDP')
#ROOT.gPad.SetTitle('Epoch 0 vs Epoch 2 n_{z} comparision')
#ROOT.gPad.FindObject('title').Clear()
#ROOT.gPad.FindObject('title').InsertLine()
#ROOT.gPad.FindObject('title').InsertText('Epoch 0 vs Epoch 2 n_{z} comparison')

# Prompt exit
print('\nPress enter to continue.\n')
os.system('read gonext')



    
